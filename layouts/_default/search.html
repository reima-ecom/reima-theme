{{ define "dependencies" }}
<meta name="robots" content="noindex">
{{ $.Scratch.Add "css-critical" "_default/search.css" }}
{{ $.Scratch.Add "css-critical" "partials/elements/r-search-results.css" }}
{{ end }}

{{ define "main" }}

{{ $tsname := "_default/search.ts" }}
{{- $js := (resources.Get $tsname) | js.Build (dict "format" "esm") -}}
<script src="{{$js.RelPermalink}}" type="module"></script>

<label class="btn" for="show-filters">
  {{default "Filter selection" (T "Collection page filter selection")}}
</label>
<input id="show-filters" type="checkbox">
<aside class="filters">
  {{partial "elements/r-search-filters"}}
  <label class="btn btn--inv" for="show-filters">X</label>
</aside>
{{partial "elements/r-search-results" (dict "take" 50 "loadMore" true "filters" "r-search-filters")}}

{{ end }}
